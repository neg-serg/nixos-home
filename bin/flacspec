#!/bin/sh
set -eu
if (set -o pipefail) 2>/dev/null; then
  set -o pipefail
fi
# flacspec: generate spectrograms for all .flac in current directory
# Usage: flacspec
if [ "${1:-}" = "-h" ] || [ "${1:-}" = "--help" ]; then
  sed -n '2,2p' "$0" | sed 's/^# \{0,1\}//'; exit 0
fi
mkdir -p Spectrograms
for file in *.flac; do
  [ -f "$file" ] || continue
  outfile="${file%.*}.flac.png"
  sox "$file" -n spectrogram -o "$outfile" && mv "$outfile" Spectrograms/
done
